(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-35ec49ff"],{"1de9":function(e,t,n){},"25f0":function(e,t,n){"use strict";var r=n("6eeb"),s=n("825a"),a=n("d039"),i=n("ad6d"),c="toString",o=RegExp.prototype,u=o[c],h=a((function(){return"/a/b"!=u.call({source:"a",flags:"b"})})),l=u.name!=c;(h||l)&&r(RegExp.prototype,c,(function(){var e=s(this),t=String(e.source),n=e.flags,r=String(void 0===n&&e instanceof RegExp&&!("flags"in o)?i.call(e):n);return"/"+t+"/"+r}),{unsafe:!0})},"2ca7":function(e,t,n){"use strict";n("1de9")},"4d63":function(e,t,n){var r=n("83ab"),s=n("da84"),a=n("94ca"),i=n("7156"),c=n("9bf2").f,o=n("241c").f,u=n("44e7"),h=n("ad6d"),l=n("9f7f"),f=n("6eeb"),d=n("d039"),p=n("69f3").set,g=n("2626"),v=n("b622"),x=v("match"),m=s.RegExp,S=m.prototype,w=/a/g,b=/a/g,T=new m(w)!==w,R=l.UNSUPPORTED_Y,_=r&&a("RegExp",!T||R||d((function(){return b[x]=!1,m(w)!=w||m(b)==b||"/a/i"!=m(w,"i")})));if(_){var y=function(e,t){var n,r=this instanceof y,s=u(e),a=void 0===t;if(!r&&s&&e.constructor===y&&a)return e;T?s&&!a&&(e=e.source):e instanceof y&&(a&&(t=h.call(e)),e=e.source),R&&(n=!!t&&t.indexOf("y")>-1,n&&(t=t.replace(/y/g,"")));var c=i(T?new m(e,t):m(e,t),r?this:S,y);return R&&n&&p(c,{sticky:n}),c},H=function(e){e in y||c(y,e,{configurable:!0,get:function(){return m[e]},set:function(t){m[e]=t}})},k=o(m),E=0;while(k.length>E)H(k[E++]);S.constructor=y,y.prototype=S,f(s,"RegExp",y)}g("RegExp")},"5a96":function(e,t,n){"use strict";n("f2b3")},"6fc6":function(e,t,n){},efe3:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("form",{attrs:{action:"/"}},[n("van-search",{attrs:{background:"#3296fa",placeholder:"请输入搜索关键词","show-action":""},on:{search:function(t){return e.onSearch(e.searchText)},cancel:function(t){return e.$router.back()},focus:function(t){e.isResultShow=!1}},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),e.isResultShow?n("SearchResult",{attrs:{searchText:e.searchText}}):e.searchText?n("SearchSuggestion",{attrs:{searchText:e.searchText},on:{search:e.onSearch}}):n("SearchHistory",{attrs:{searchHistories:e.searchHistories},on:{search:e.onSearch,AllDelete:function(t){e.searchHistories=[]}}})],1)},s=[],a=n("1da1"),i=(n("96cf"),n("c975"),n("a434"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"SearchSuggestion"}},e._l(e.suggestions,(function(t,r){return n("van-cell",{key:r,attrs:{title:t,icon:"search"},on:{click:function(n){return e.$emit("search",t)}}},[n("div",{attrs:{slot:"title"},domProps:{innerHTML:e._s(e.heighlight(t))},slot:"title"})])})),1)}),c=[],o=(n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("b775")),u=function(e){return Object(o["a"])({method:"GET",url:"/app/v1_0/suggestion",params:e})},h=function(e){return Object(o["a"])({method:"GET",url:"app/v1_0/search",params:e})},l=n("2ef0"),f={name:"SearchSuggestion",props:{searchText:{type:String,required:!0}},data:function(){return{suggestions:null}},watch:{searchText:{handler:Object(l["debounce"])((function(){var e=this;u({q:this.searchText}).then((function(t){e.suggestions=t.data.data.options}))}),600),immediate:!0}},methods:{heighlight:function(e){var t=new RegExp(this.searchText,"gi");return e.replace(t,'<span style="color: red">'.concat(this.searchText,"</span>"))}}},d=f,p=(n("2ca7"),n("2877")),g=Object(p["a"])(d,i,c,!1,null,"033c9a0e",null),v=g.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"SearchHistory"}},[n("van-cell",{attrs:{title:"搜索历史"}},[e.isdeleteShow?n("div",[n("span",{on:{click:function(t){return e.$emit("AllDelete",[])}}},[e._v("全部删除")]),e._v(" "),n("span",{on:{click:function(t){e.isdeleteShow=!1}}},[e._v("完成")])]):n("van-icon",{attrs:{name:"delete-o"},on:{click:function(t){e.isdeleteShow=!0}}})],1),e._l(e.searchHistories,(function(t,r){return n("van-cell",{key:r,attrs:{title:t},on:{click:function(n){return e.onDelet(r,t)}}},[n("van-icon",{directives:[{name:"show",rawName:"v-show",value:e.isdeleteShow,expression:"isdeleteShow"}],attrs:{name:"close"}})],1)}))],2)},m=[],S={name:"SearchHistory",props:{searchHistories:{type:Array,required:!0}},data:function(){return{isdeleteShow:!1}},methods:{onDelet:function(e,t){this.isdeleteShow?this.searchHistories.splice(e,1):this.$emit("search",t)}}},w=S,b=(n("5a96"),Object(p["a"])(w,x,m,!1,null,"c0232482",null)),T=b.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"SearchResult"}},[n("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.searchs,(function(e,t){return n("van-cell",{key:t,attrs:{title:e.title}})})),1)],1)},_=[],y=n("2909"),H={name:"SearchResult",props:{searchText:{type:String,required:!0}},data:function(){return{searchs:[],loading:!1,finished:!1,page:1,per_page:10}},methods:{onLoad:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n,r,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h({page:e.page,per_page:e.per_page,q:e.searchText});case 2:r=t.sent,s=r.data,a=s.data.results,(n=e.searchs).push.apply(n,Object(y["a"])(a)),e.loading=!1,a.length?e.page++:e.finished=!0;case 8:case"end":return t.stop()}}),t)})))()}}},k=H,E=(n("f028"),Object(p["a"])(k,R,_,!1,null,"e1230cb0",null)),O=E.exports,j=n("5d2d"),$={name:"searchIndex",components:{SearchSuggestion:v,SearchHistory:T,SearchResult:O},data:function(){return{searchText:"",isResultShow:!1,searchHistories:[]}},watch:{searchHistories:function(){Object(j["b"])("search-histories",this.searchHistories)}},created:function(){this.loadgetUserHistories()},methods:{onSearch:function(e){this.searchText=e;var t=this.searchHistories.indexOf(e);-1!==t&&this.searchHistories.splice(t,1),this.searchHistories.unshift(e),this.isResultShow=!0},loadgetUserHistories:function(){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object(j["a"])("search-histories")||[],e.searchHistories=n;case 2:case"end":return t.stop()}}),t)})))()}}},q=$,D=Object(p["a"])(q,r,s,!1,null,"26284574",null);t["default"]=D.exports},f028:function(e,t,n){"use strict";n("6fc6")},f2b3:function(e,t,n){}}]);
//# sourceMappingURL=chunk-35ec49ff.5115295c.js.map