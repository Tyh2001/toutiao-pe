{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./src/views/search/components/SearchSuggestion.vue?add3","webpack:///./node_modules/core-js/modules/es.regexp.constructor.js","webpack:///./src/views/search/components/SearchHistory.vue?ba4f","webpack:///./src/views/search/index.vue?a99e","webpack:///./src/views/search/components/SearchSuggestion.vue?e9e0","webpack:///./src/api/search.js","webpack:///src/views/search/components/SearchSuggestion.vue","webpack:///./src/views/search/components/SearchSuggestion.vue?5868","webpack:///./src/views/search/components/SearchSuggestion.vue","webpack:///./src/views/search/components/SearchHistory.vue?2930","webpack:///src/views/search/components/SearchHistory.vue","webpack:///./src/views/search/components/SearchHistory.vue?dc80","webpack:///./src/views/search/components/SearchHistory.vue","webpack:///./src/views/search/components/SearchResult.vue?a6d5","webpack:///src/views/search/components/SearchResult.vue","webpack:///./src/views/search/components/SearchResult.vue?96ac","webpack:///./src/views/search/components/SearchResult.vue","webpack:///src/views/search/index.vue","webpack:///./src/views/search/index.vue?2b70","webpack:///./src/views/search/index.vue","webpack:///./src/views/search/components/SearchResult.vue?643a"],"names":["redefine","anObject","fails","flags","TO_STRING","RegExpPrototype","RegExp","prototype","nativeToString","NOT_GENERIC","call","source","INCORRECT_NAME","name","R","this","p","String","rf","f","undefined","unsafe","DESCRIPTORS","global","isForced","inheritIfRequired","defineProperty","getOwnPropertyNames","isRegExp","getFlags","stickyHelpers","setInternalState","set","setSpecies","wellKnownSymbol","MATCH","NativeRegExp","re1","re2","CORRECT_NEW","UNSUPPORTED_Y","FORCED","RegExpWrapper","pattern","sticky","thisIsRegExp","patternIsRegExp","flagsAreUndefined","constructor","indexOf","replace","result","proxy","key","configurable","get","it","keys","index","length","render","_vm","_h","$createElement","_c","_self","attrs","on","$event","onSearch","searchText","$router","back","isResultShow","model","value","callback","$$v","expression","searchHistories","staticRenderFns","_l","suggestion","$emit","domProps","_s","heighlight","slot","getSearchSuggestions","params","request","method","url","getSearchResult","props","type","required","data","suggestions","watch","handler","q","immediate","methods","regExp","component","_v","isdeleteShow","searchHistorie","onDelet","directives","rawName","Array","splice","finished","onLoad","loading","search","title","searchs","page","per_page","components","SearchSuggestion","SearchHistory","SearchResult","created","loadgetUserHistories","unshift"],"mappings":"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","file":"js/chunk-35ec49ff.ec191c0f.js","sourcesContent":["'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchSuggestion.vue?vue&type=style&index=0&id=033c9a0e&lang=less&scoped=true&\"","var DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar defineProperty = require('../internals/object-define-property').f;\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar isRegExp = require('../internals/is-regexp');\nvar getFlags = require('../internals/regexp-flags');\nvar stickyHelpers = require('../internals/regexp-sticky-helpers');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar setInternalState = require('../internals/internal-state').set;\nvar setSpecies = require('../internals/set-species');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\nvar NativeRegExp = global.RegExp;\nvar RegExpPrototype = NativeRegExp.prototype;\nvar re1 = /a/g;\nvar re2 = /a/g;\n\n// \"new\" should create a new object, old webkit bug\nvar CORRECT_NEW = new NativeRegExp(re1) !== re1;\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y;\n\nvar FORCED = DESCRIPTORS && isForced('RegExp', (!CORRECT_NEW || UNSUPPORTED_Y || fails(function () {\n  re2[MATCH] = false;\n  // RegExp constructor can alter flags and IsRegExp works correct with @@match\n  return NativeRegExp(re1) != re1 || NativeRegExp(re2) == re2 || NativeRegExp(re1, 'i') != '/a/i';\n})));\n\n// `RegExp` constructor\n// https://tc39.es/ecma262/#sec-regexp-constructor\nif (FORCED) {\n  var RegExpWrapper = function RegExp(pattern, flags) {\n    var thisIsRegExp = this instanceof RegExpWrapper;\n    var patternIsRegExp = isRegExp(pattern);\n    var flagsAreUndefined = flags === undefined;\n    var sticky;\n\n    if (!thisIsRegExp && patternIsRegExp && pattern.constructor === RegExpWrapper && flagsAreUndefined) {\n      return pattern;\n    }\n\n    if (CORRECT_NEW) {\n      if (patternIsRegExp && !flagsAreUndefined) pattern = pattern.source;\n    } else if (pattern instanceof RegExpWrapper) {\n      if (flagsAreUndefined) flags = getFlags.call(pattern);\n      pattern = pattern.source;\n    }\n\n    if (UNSUPPORTED_Y) {\n      sticky = !!flags && flags.indexOf('y') > -1;\n      if (sticky) flags = flags.replace(/y/g, '');\n    }\n\n    var result = inheritIfRequired(\n      CORRECT_NEW ? new NativeRegExp(pattern, flags) : NativeRegExp(pattern, flags),\n      thisIsRegExp ? this : RegExpPrototype,\n      RegExpWrapper\n    );\n\n    if (UNSUPPORTED_Y && sticky) setInternalState(result, { sticky: sticky });\n\n    return result;\n  };\n  var proxy = function (key) {\n    key in RegExpWrapper || defineProperty(RegExpWrapper, key, {\n      configurable: true,\n      get: function () { return NativeRegExp[key]; },\n      set: function (it) { NativeRegExp[key] = it; }\n    });\n  };\n  var keys = getOwnPropertyNames(NativeRegExp);\n  var index = 0;\n  while (keys.length > index) proxy(keys[index++]);\n  RegExpPrototype.constructor = RegExpWrapper;\n  RegExpWrapper.prototype = RegExpPrototype;\n  redefine(global, 'RegExp', RegExpWrapper);\n}\n\n// https://tc39.es/ecma262/#sec-get-regexp-@@species\nsetSpecies('RegExp');\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchHistory.vue?vue&type=style&index=0&id=c0232482&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('form',{attrs:{\"action\":\"/\"}},[_c('van-search',{attrs:{\"background\":\"#3296fa\",\"placeholder\":\"请输入搜索关键词\",\"show-action\":\"\"},on:{\"search\":function($event){return _vm.onSearch(_vm.searchText)},\"cancel\":function($event){return _vm.$router.back()},\"focus\":function($event){_vm.isResultShow = false}},model:{value:(_vm.searchText),callback:function ($$v) {_vm.searchText=$$v},expression:\"searchText\"}})],1),(_vm.isResultShow)?_c('SearchResult',{attrs:{\"searchText\":_vm.searchText}}):(_vm.searchText)?_c('SearchSuggestion',{attrs:{\"searchText\":_vm.searchText},on:{\"search\":_vm.onSearch}}):_c('SearchHistory',{attrs:{\"searchHistories\":_vm.searchHistories},on:{\"search\":_vm.onSearch,\"AllDelete\":function($event){_vm.searchHistories = []}}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"SearchSuggestion\"}},_vm._l((_vm.suggestions),function(suggestion,index){return _c('van-cell',{key:index,attrs:{\"title\":suggestion,\"icon\":\"search\"},on:{\"click\":function($event){return _vm.$emit('search', suggestion)}}},[_c('div',{attrs:{\"slot\":\"title\"},domProps:{\"innerHTML\":_vm._s(_vm.heighlight(suggestion))},slot:\"title\"})])}),1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * 搜索模块\n */\n\nimport request from '@/utils/request'\n\n// 获取全部频道列表\nexport const getSearchSuggestions = params => {\n  return request({\n    method: 'GET',\n    url: '/app/v1_0/suggestion',\n    params\n  })\n}\n\n// 获取搜索结果\nexport const getSearchResult = params => {\n  return request({\n    method: 'GET',\n    url: 'app/v1_0/search',\n    params\n  })\n}\n\n// 获取用户搜索历史\nexport const getUserHistories = () => {\n  return request({\n    method: 'GET',\n    url: '/app/v1_0/search/histories'\n  })\n}\n","<template>\n  <div id=\"SearchSuggestion\">\n    <!-- 联想建议组件 -->\n    <!--\n      把输入框设置为要搜索的文本\n      通过点击某一项来向父组件传递数据\n      @click=\"$emit('search', suggestion)\"\n      通过点击事件触发自定义事件 将那一项的内容传递过去\n    -->\n    <van-cell\n      v-for=\"(suggestion, index) in suggestions\"\n      :key=\"index\"\n      :title=\"suggestion\"\n      icon=\"search\"\n      @click=\"$emit('search', suggestion)\"\n    >\n      <!-- 让联想到的数据高亮显示 -->\n      <div slot=\"title\" v-html=\"heighlight(suggestion)\"></div>\n    </van-cell>\n  </div>\n</template>\n\n<script>\n// 获取联想建议\nimport { getSearchSuggestions } from '@/api/search'\n// 引入防抖包\nimport { debounce } from 'lodash'\nexport default {\n  name: 'SearchSuggestion',\n  props: {\n    // 搜索框的内容\n    searchText: {\n      type: String,\n      required: true\n    }\n  },\n  data () {\n    return {\n      suggestions: null // 联想建议\n    }\n  },\n  // 用来监视数据的变化\n  watch: {\n    // 这里要监视 searchText 的变化 就是文本框里内容的变化\n    // searchText () {\n    //   console.log(1)\n    // }\n    // 下面的写法等价于上面的写法 下面的写法是完整的写法\n    // handler 是自带的方法名称\n    searchText: {\n      handler: debounce(function () {\n        getSearchSuggestions({\n          q: this.searchText\n        }).then(res => {\n          // console.log(1)\n          this.suggestions = res.data.data.options\n        })\n      }, 600),\n      // async handler () {\n      //   // console.log(1)\n      //   const { data } = await getSearchSuggestions({\n      //     q: this.searchText\n      //   })\n      //   console.log(data)\n      //   this.suggestions = data.data.options\n      // },\n      // 在初始化的时候先调用一下\n      immediate: true\n    }\n  },\n  methods: {\n    // 联想到的文字高亮显示\n    heighlight (suggestion) {\n      // RegExp 是正则表达式的构造函数 原生写法\n      // 参数1：字符串\n      // 参数2：匹配模式\n      // 返回值：正则对象\n      // g 是匹配全部 i 是不区分大小写\n      // new RegExp(this.searchText, 'gi')\n      const regExp = new RegExp(this.searchText, 'gi')\n      return suggestion.replace(regExp, `<span style=\"color: red\">${this.searchText}</span>`)\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n#SearchSuggestion {\n  position: fixed;\n  top: 54px;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  overflow: auto;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchSuggestion.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchSuggestion.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchSuggestion.vue?vue&type=template&id=033c9a0e&scoped=true&\"\nimport script from \"./SearchSuggestion.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchSuggestion.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchSuggestion.vue?vue&type=style&index=0&id=033c9a0e&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"033c9a0e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"SearchHistory\"}},[_c('van-cell',{attrs:{\"title\":\"搜索历史\"}},[(_vm.isdeleteShow)?_c('div',[_c('span',{on:{\"click\":function($event){return _vm.$emit('AllDelete', [])}}},[_vm._v(\"全部删除\")]),_vm._v(\" \"),_c('span',{on:{\"click\":function($event){_vm.isdeleteShow = false}}},[_vm._v(\"完成\")])]):_c('van-icon',{attrs:{\"name\":\"delete-o\"},on:{\"click\":function($event){_vm.isdeleteShow = true}}})],1),_vm._l((_vm.searchHistories),function(searchHistorie,index){return _c('van-cell',{key:index,attrs:{\"title\":searchHistorie},on:{\"click\":function($event){return _vm.onDelet(index, searchHistorie)}}},[_c('van-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isdeleteShow),expression:\"isdeleteShow\"}],attrs:{\"name\":\"close\"}})],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"SearchHistory\">\n    <!-- 历史记录 -->\n    <van-cell title=\"搜索历史\">\n      <div v-if=\"isdeleteShow\">\n        <!-- 全部删除 更新历史记录变成一个空数组 -->\n        <span @click=\"$emit('AllDelete', [])\">全部删除</span>\n        &nbsp;&nbsp;\n        <span @click=\"isdeleteShow = false\">完成</span>\n      </div>\n      <!-- 删除按钮 -->\n      <van-icon\n        v-else\n        name=\"delete-o\"\n        @click=\"isdeleteShow = true\"\n      />\n    </van-cell>\n    <!-- 内容单元格 -->\n    <van-cell\n      v-for=\"(searchHistorie, index) in searchHistories\"\n      :key=\"index\"\n      :title=\"searchHistorie\"\n      @click=\"onDelet(index, searchHistorie)\"\n    >\n      <!-- 删除按钮 -->\n      <van-icon\n        name=\"close\"\n        v-show=\"isdeleteShow\"\n      />\n    </van-cell>\n  </div>\n</template>\n\n<script>\n// 设置本地存储的数据\n// import { setItem } from '@/utils/storage'\nexport default {\n  name: 'SearchHistory',\n  // props 数据不能重新赋值 比如 xxx = xxx\n  // 如果想要重新赋值 那么就要父组件自己修改\n  props: {\n    // 搜索的历史记录\n    searchHistories: {\n      type: Array,\n      required: true\n    }\n  },\n  data () {\n    return {\n      isdeleteShow: false // 删除历史记录的按钮显示状态\n    }\n  },\n  methods: {\n    // 删除历史记录的某一项\n    // 传递索引值和当前的文本\n    onDelet (index, searchHistorie) {\n      // 如果是删除的状态 点击列表才会执行删除的操作\n      if (this.isdeleteShow) {\n        // 删除数据要处理：\n        // 1. 修改本地存储数据\n        // 2. 请求接口删除线上数据\n        this.searchHistories.splice(index, 1)\n        // 删除历史记录后台没有删除单个的功能 只有删除全部是接口\n        // 这里只要把本地存储的数控处理一下就好了\n        // 不用设置本地存储了 父组件通过监视统一处理了\n        // setItem('search-histories', this.searchHistories)\n        return\n      }\n\n      // 非删除状态那么点击就会进行搜索\n      // 触发父组件的 onSearch 方法进行搜索 传递点击的那个历史记录的内容进行搜索\n      this.$emit('search', searchHistorie)\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n#SearchHistory {\n  position: fixed;\n  top: 54px;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  overflow: auto;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchHistory.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchHistory.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchHistory.vue?vue&type=template&id=c0232482&scoped=true&\"\nimport script from \"./SearchHistory.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchHistory.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchHistory.vue?vue&type=style&index=0&id=c0232482&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c0232482\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"SearchResult\"}},[_c('van-list',{attrs:{\"finished\":_vm.finished,\"finished-text\":\"没有更多了\"},on:{\"load\":_vm.onLoad},model:{value:(_vm.loading),callback:function ($$v) {_vm.loading=$$v},expression:\"loading\"}},_vm._l((_vm.searchs),function(search,index){return _c('van-cell',{key:index,attrs:{\"title\":search.title}})}),1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"SearchResult\">\n    <!-- 搜索结果组件 -->\n    <van-list\n      v-model=\"loading\"\n      :finished=\"finished\"\n      finished-text=\"没有更多了\"\n      @load=\"onLoad\"\n    >\n      <van-cell\n        v-for=\"(search, index) in searchs\"\n        :key=\"index\"\n        :title=\"search.title\"\n      />\n    </van-list>\n  </div>\n</template>\n\n<script>\n// 获取搜索结果\nimport { getSearchResult } from '@/api/search'\nexport default {\n  name: 'SearchResult',\n  props: {\n    // 文本框里搜索的内容 用来查询搜索的结果\n    searchText: {\n      type: String,\n      required: true\n    }\n  },\n  data () {\n    return {\n      searchs: [], // 搜索结果\n      loading: false, // 加载的 loading\n      finished: false, // 是否全部加载完成\n      page: 1, // 每页数量，不传每页数量由后端决定\n      per_page: 10 // 搜索关键词\n    }\n  },\n  methods: {\n    // List 组件加载数据\n    async onLoad () {\n      // 1.请求获取数据\n      const { data } = await getSearchResult({\n        page: this.page, // 页数，不传默认为1\n        per_page: this.per_page, // 每页数量\n        q: this.searchText // 搜索关键词\n      })\n      // console.log(data)\n\n      // 2.将数据放到数据列表中\n      const { results } = data.data\n      this.searchs.push(...results)\n\n      // 3.关闭本次的 Loading\n      this.loading = false\n\n      // 4.判断是否还有数据 如果有 则获取下一页数据的页码 如果没有 则把 finished 设置为 true 关闭加载更多\n      if (results.length) {\n        // 如果还有数据 就更新页码 加载下一页\n        this.page++\n      } else {\n        this.finished = true\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n#SearchResult {\n  position: fixed;\n  top: 54px;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  overflow: auto;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchResult.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchResult.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchResult.vue?vue&type=template&id=e1230cb0&scoped=true&\"\nimport script from \"./SearchResult.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchResult.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchResult.vue?vue&type=style&index=0&id=e1230cb0&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e1230cb0\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div>\n    <!-- 搜索页面模块 -->\n    <!-- 1.搜索框 -->\n    <!-- 在 van-search 外层增加 form 标签，且 action 不为空，即可在 iOS 输入法中显示搜索按钮 -->\n    <form action=\"/\">\n      <van-search\n        background=\"#3296fa\"\n        v-model=\"searchText\"\n        placeholder=\"请输入搜索关键词\"\n        show-action\n        @search=\"onSearch(searchText)\"\n        @cancel=\"$router.back()\"\n        @focus=\"isResultShow = false\"\n      />\n    </form>\n\n    <!-- 2.搜索结果 -->\n    <SearchResult\n      v-if=\"isResultShow\"\n      :searchText=\"searchText\"\n    />\n\n    <!-- 3.搜索联想建议  -->\n    <!-- 如果文本框里有内容就展示 -->\n    <SearchSuggestion\n      v-else-if=\"searchText\"\n      :searchText=\"searchText\"\n      @search=\"onSearch\"\n    />\n\n    <!-- 4.历史记录 -->\n    <SearchHistory\n      :searchHistories=\"searchHistories\"\n      v-else\n      @search=\"onSearch\"\n      @AllDelete=\"searchHistories = []\"\n    />\n\n  </div>\n</template>\n\n<script>\n// 引入联想建议组件\nimport SearchSuggestion from './components/SearchSuggestion'\n// 引入历史记录组件\nimport SearchHistory from './components/SearchHistory'\n// 引入搜索结果组件\nimport SearchResult from './components/SearchResult'\n// 设置本地存储 - 获取本地存储\nimport { setItem, getItem } from '@/utils/storage'\n// 获取用户搜索历史\n// import { getUserHistories } from '@/api/search'\nexport default {\n  name: 'searchIndex',\n  components: {\n    SearchSuggestion, // 联想建议组件\n    SearchHistory, // 历史记录组件\n    SearchResult // 搜索结果组件\n  },\n  data () {\n    return {\n      searchText: '', // 搜索框的内容\n      isResultShow: false, // 控制搜索结果的显示状态\n      // searchHistories: [] // 搜索历史记录\n      // 历史记录存储到的本地存储中 这里直接获取即可\n      // 如果本地存储没有数据就使用读取到的数据 如果没有 就是一个空数组\n      // searchHistories: getItem('search-histories') || [] // 搜索历史记录\n      searchHistories: [] // 搜索历史记录\n    }\n  },\n  // 这里来监视搜索历史记录的变化\n  // 在这里来做持久化 只要发生变化 就重新设置本地存储\n  // 写了这么个代码 所有设置这个本地存储的就全部都不用写了 直接监视所有\n  watch: {\n    searchHistories () {\n      setItem('search-histories', this.searchHistories)\n    }\n  },\n  created () {\n    this.loadgetUserHistories() // 获取用户搜索历史\n  },\n  methods: {\n    // 事件在点击键盘上的搜索/回车按钮后触发\n    onSearch (searchText) {\n      // 点击联想建议之后文本框里也会变成点击的内容\n      // 把输入框设置为要搜索的文本\n      this.searchText = searchText\n\n      // 将历史记录存起来\n      // indexOf 找到匹配字符的索引\n      // 如果有重复的内容 先把重复的内容移除 再把新的记录展示到最上方\n      const index = this.searchHistories.indexOf(searchText)\n      if (index !== -1) {\n        // 把重复项移除\n        this.searchHistories.splice(index, 1)\n      }\n      // unshift 方法：让最新的排在前面\n      this.searchHistories.unshift(searchText)\n\n      // 如果已经登录 则把数据存储到线上\n      // 我们只要调用获取搜索结果的接口 后端会自动给我们存储用户搜索的历史记录\n      // 如果没有登陆 则需要把历史记录存储到本地\n      // setItem('search-histories', this.searchHistories) // 把搜索的历史记录存储到本地\n\n      // 当搜索之后 搜索结果是显示状态\n      this.isResultShow = true\n    },\n    // 获取用户搜索历史 后端只记录最后的4个历史记录\n    // 因为后台帮助我们存储的历史记录太少了 只有4条\n    // 所以这里将后端返回的数据和本地存储的数据合并到一起\n    async loadgetUserHistories () {\n      // 如果本地存储有数据就获取 否则就是空数组\n      const searchHistories = getItem('search-histories') || []\n      // 如果用户已经登录\n      // 这里因为接口满足不了我们是需求 就不获取后台的四条历史记录了\n      // 直接将所有搜索记录直接设置本地存储\n      // if (this.$store.state.user) {\n      //   const { data } = await getUserHistories() // 获取到的线上的存储数据\n      //   // console.log(data.data.keywords)\n      //   // new Set([]) 是 es6 的新语法 数组去重\n      //   // Set 类似数组 但是并不是一个数组 这里还要把转换之后的再次转换成数组\n      //   // 合并数组 [...数组,...数组]\n      //   // 把 Set 转换为数组 [...Set对象]\n      //   // 所以最终结果是 [...new Set([...数组,...数组])]\n      //   searchHistories = [...new Set([\n      //     ...searchHistories,\n      //     ...data.data.keywords\n      //   ])]\n      // }\n      this.searchHistories = searchHistories\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=26284574&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"26284574\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchResult.vue?vue&type=style&index=0&id=e1230cb0&lang=less&scoped=true&\""],"sourceRoot":""}